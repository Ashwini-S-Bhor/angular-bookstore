/* ============================
   Bulk Purchase Form (SCSS)
   - Angular + Angular Material
   - Mobile-first, accessible
   ============================ */

/* ---- Design tokens ---- */
$surface: linear-gradient(135deg, #fdfbfb, #ebedee);
$border-radius: 16px;
$shadow-lg: 0 8px 20px rgba(0, 0, 0, 0.1);
$brand: #3f51b5;
$text-muted: #666;
$gap: 16px;
$pad: 20px;

/* Optional: container host (Angular component) */
:host {
  display: block;
}

/* ---- Card wrapper ---- */
.bulk-wrapper {
  width: 100%;
  max-width: 640px;
  margin: 24px auto;
  padding: $pad;
  background: $surface;
  border-radius: $border-radius;
  box-shadow: $shadow-lg;
  animation: fadeIn 0.6s ease-in-out;
  box-sizing: border-box;

  .title {
    text-align: center;
    font-size: clamp(1.25rem, 3.5vw, 2rem);
    font-weight: 700;
    color: $brand;
    margin: 0 0 6px;
  }

  .subtitle {
    text-align: center;
    font-size: clamp(0.9rem, 2.6vw, 1rem);
    color: $text-muted;
    margin: 0 0 18px;
  }
}

/* ---- Form layout ---- */
.bulk-form {
  display: grid;
  grid-template-columns: 1fr;     /* mobile */
  gap: $gap;

  /* Two-column for wider screens */
  @media (min-width: 768px) {
    grid-template-columns: 1fr 1fr;

    /* Make specific fields span both columns if desired */
    .form-field--full,
    .form-field--message,
    .form-field--submit {
      grid-column: 1 / -1;
    }
  }
}

/* ---- Angular Material field sizing ---- */
.form-field {
  width: 100%;

  /* Ensure outline fields fill grid cells nicely */
  .mat-mdc-form-field,
  .mat-mdc-text-field-wrapper,
  .mdc-text-field {
    width: 100%;
  }
}

/* Examples: make certain fields full-width always */
.form-field--message,
.form-field--submit {
  grid-column: 1 / -1; /* full width on all screens */
}

/* ---- Textarea sizing ---- */
textarea[matInput] {
  min-height: 96px;
  resize: vertical;
}

/* ---- Submit button ---- */
.submit-btn {
  width: 100%;
  justify-self: stretch;
  margin-top: 6px;
  padding: 12px;
  font-size: clamp(1rem, 2.8vw, 1.1rem);
  font-weight: 600;
  border-radius: 12px;
  transition: transform 0.2s ease, box-shadow 0.2s ease, background-color 0.2s ease;
  min-height: 44px;       /* accessible touch target */
  touch-action: manipulation;

  &:hover {
    background-color: #303f9f; /* darkened brand */
    transform: translateY(-2px) scale(1.03);
    box-shadow: 0 8px 18px rgba(63, 81, 181, 0.4);
  }
}

/* ---- Validation & states ---- */
/* Show red ring on invalid touched fields */
.mat-mdc-form-field-invalid .mdc-notched-outline__leading,
.mat-mdc-form-field-invalid .mdc-notched-outline__notch,
.mat-mdc-form-field-invalid .mdc-notched-outline__trailing {
  border-color: #d32f2f !important;
}

/* Focus ring (accessible) */
.mdc-text-field--focused .mdc-notched-outline__leading,
.mdc-text-field--focused .mdc-notched-outline__notch,
.mdc-text-field--focused .mdc-notched-outline__trailing {
  border-color: $brand !important;
  box-shadow: 0 0 0 2px rgba(63, 81, 181, 0.15);
}

/* Error message spacing */
.mat-mdc-form-field-subscript-wrapper {
  margin-top: 2px;
}

/* ---- Density helpers (optional) ---- */
.bulk-form.--compact {
  gap: 12px;

  .mat-mdc-form-field {
    --mdc-outlined-text-field-container-shape: 10px;
  }
}

/* ---- Safe areas / mobile polish ---- */
.bulk-wrapper {
  padding-bottom: max(env(safe-area-inset-bottom, 0), 16px);
}

/* ---- Reduce motion respect ---- */
@media (prefers-reduced-motion: reduce) {
  .bulk-wrapper { animation: none; }
  .submit-btn { transition: none; }
}

/* ---- Dark mode tweak ---- */
@media (prefers-color-scheme: dark) {
  .bulk-wrapper {
    background: linear-gradient(135deg, #1f1f1f, #2a2a2a);
    box-shadow: 0 8px 20px rgba(0,0,0,0.4);
  }
  .subtitle { color: #aaa; }
}

/* ---- Animation ---- */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(15px); }
  to   { opacity: 1; transform: translateY(0); }
}
