<ng-container *ngIf="book; else notFound">
  <mat-card class="book-detail-card">
    <div class="book-header">
      <img [src]="book.image" alt="{{ book.title }} cover" class="book-cover" />
      <div class="book-info">
        <h2>{{ book.title }}</h2>
        <p class="author">by {{ book.author }}</p>
        <p class="category"><strong>Category:</strong> {{ book.category }}</p>
        <p class="language"><strong>Language:</strong> {{ book.language }}</p>
        <p class="year"><strong>Year:</strong> {{ book.year }}</p>
        <p class="price">
          ₹{{ book.price }}
          <span *ngIf="book.discount" class="discount">-{{ book.discount }}%</span>
        </p>
        <div class="rating">
          <span *ngFor="let star of [1,2,3,4,5]" 
                [ngClass]="{'filled': star <= book.rating}">
            ★
          </span>
        </div>
        <button mat-flat-button color="primary" (click)="addToCart()">Add to Cart</button>
      </div>
    </div>

    <div class="description">
      <h3>Description</h3>
      <p>{{ book.description || 'No description available.' }}</p>
    </div>

    <div class="reviews-section" *ngIf="book.reviews?.length > 0">
      <h3>Reviews</h3>
      <div class="review" *ngFor="let r of book.reviews">
        <strong>{{ r.user }}</strong> (⭐{{ r.rating }})
        <p>{{ r.comment }}</p>
      </div>
    </div>
  </mat-card>
</ng-container>

<ng-template #notFound>
  <p>Book not found.</p>
</ng-template>
